(this["webpackJsonpmoviefolio-new"]=this["webpackJsonpmoviefolio-new"]||[]).push([[0],{70:function(e,t,c){},82:function(e,t,c){"use strict";c.r(t);var s=c(3),n=c(1),a=c.n(n),r=c(27),i=c.n(r),l=(c(70),c(34)),j=c.n(l),u=c(42),o=c(15),d=c(88),b=c(95),h=c(94),O=c(90),x=c(63),m=c(13),p=c(39),f=(c(74),c(75),p.a.initializeApp({apiKey:"AIzaSyD-LFgo8paxDWdpyZynvyFDaxLb30t_BD8",authDomain:"fir-adminpanel-d4183.firebaseapp.com",projectId:"fir-adminpanel-d4183",storageBucket:"fir-adminpanel-d4183.appspot.com",messagingSenderId:"647213379857",appId:"1:647213379857:web:42bfa4083c909fc2f15cb0"})),v=f.auth(),g=p.a.firestore(),N=new p.a.auth.GoogleAuthProvider,_=function(){p.a.auth().signInWithPopup(N).then((function(e){console.log(e.user)})).catch((function(e){console.log(e.message)}))},y=Object(n.createContext)(),w=function(e){var t=Object(n.useState)([]),c=Object(o.a)(t,2),a=c[0],r=c[1];Object(n.useEffect)((function(){v.onAuthStateChanged((function(e){r(e)}))}),[a]);var i={user:a,signup:function(e,t,c,s){v.createUserWithEmailAndPassword(e,t).then((function(){var e="".concat(c," ").concat(s);v.currentUser.updateProfile({displayName:e})})).then((function(){g.collection("users").doc(v.currentUser.uid).set({firstName:c,surName:s,uid:v.currentUser.uid,createdAt:new Date,eMail:v.currentUser.email,isOnline:!0})}))},login:function(e,t){v.signInWithEmailAndPassword(e,t).then((function(e){return r(e.user),g.collection("users").doc(e.user.uid).update({isOnline:!0})})).catch((function(e){console.log(e)}))}};return Object(s.jsxs)(s.Fragment,{children:[a?Object(s.jsx)(m.a,{to:"/"}):Object(s.jsx)(m.a,{to:"/login"}),Object(s.jsx)(y.Provider,{value:{value:i},children:e.children})]})},C=c(31),S=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useRef)(),i=Object(n.useContext)(y).value,l=Object(n.useState)(""),m=Object(o.a)(l,2),p=m[0],f=m[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),N=g[0],w=g[1];function S(){return(S=Object(u.a)(j.a.mark((function s(n){return j.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n.preventDefault(),a.current.value===r.current.value){s.next=3;break}return s.abrupt("return",f("Passwords do not match "));case 3:return s.prev=3,f(""),w("true"),s.next=8,i.signup(c.current.value,a.current.value,e.current.value,t.current.value);case 8:s.next=14;break;case 10:s.prev=10,s.t0=s.catch(3),f("Failed to create an account "),console.log(a.current.value);case 14:w("false");case 15:case"end":return s.stop()}}),s,null,[[3,10]])})))).apply(this,arguments)}return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(d.a,{className:"align-items-center d-flex justify-content-center",style:{minHeight:"100vh"},children:Object(s.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(s.jsx)(b.a,{children:Object(s.jsxs)(b.a.Body,{children:[Object(s.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),p&&Object(s.jsx)(h.a,{variant:"danger",children:p}),Object(s.jsxs)(O.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(s.jsxs)(O.a.Group,{id:"name",children:[Object(s.jsx)(O.a.Label,{children:"Name"}),Object(s.jsx)(O.a.Control,{type:"text",ref:e,required:!0})]}),Object(s.jsxs)(O.a.Group,{id:"surname",children:[Object(s.jsx)(O.a.Label,{children:"Surname"}),Object(s.jsx)(O.a.Control,{type:"text",ref:t,required:!0})]}),Object(s.jsxs)(O.a.Group,{id:"email",children:[Object(s.jsx)(O.a.Label,{children:"E-mail"}),Object(s.jsx)(O.a.Control,{type:"email",ref:c,required:!0})]}),Object(s.jsxs)(O.a.Group,{id:"password",children:[Object(s.jsx)(O.a.Label,{children:"Password"}),Object(s.jsx)(O.a.Control,{type:"password",ref:a,required:!0})]}),Object(s.jsxs)(O.a.Group,{id:"password-confirm",children:[Object(s.jsx)(O.a.Label,{children:"Password Confirmation"}),Object(s.jsx)(O.a.Control,{type:"password",ref:r,required:!0})]}),Object(s.jsx)(x.a,{disable:N,className:"w-100",type:"Submit",children:"Sing Up"})]}),Object(s.jsx)("div",{className:"text-center h-500px",children:" OR"}),Object(s.jsx)("div",{className:"d-flex justify-content-center",children:Object(s.jsx)(x.a,{variant:"danger",onClick:_,children:Object(s.jsx)("i",{className:"fab fa-google"})})}),Object(s.jsxs)("div",{children:["Already have an account ? ",Object(s.jsx)(C.b,{to:"/login",className:"variant",children:"Login"})," "]})]})})})})})},L=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useContext)(y).value,a=Object(n.useState)(""),r=Object(o.a)(a,2),i=r[0],l=r[1],m=Object(n.useState)(!1),p=Object(o.a)(m,2),f=p[0],v=p[1];function g(){return(g=Object(u.a)(j.a.mark((function s(n){return j.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n.preventDefault(),s.prev=1,l(""),v("true"),s.next=6,c.login(e.current.value,t.current.value);case 6:s.next=12;break;case 8:s.prev=8,s.t0=s.catch(1),l("Failed to create an account "),console.log(t.current.value);case 12:v("false");case 13:case"end":return s.stop()}}),s,null,[[1,8]])})))).apply(this,arguments)}return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(d.a,{className:"align-items-center d-flex justify-content-center",style:{minHeight:"100vh"},children:Object(s.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(s.jsx)(b.a,{children:Object(s.jsxs)(b.a.Body,{children:[Object(s.jsx)("h2",{className:"text-center mb-4",children:"Login"}),i&&Object(s.jsx)(h.a,{variant:"danger",children:i}),f&&Object(s.jsx)(h.a,{variant:"success",children:"Welcome"}),Object(s.jsxs)(O.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(s.jsxs)(O.a.Group,{id:"email",children:[Object(s.jsx)(O.a.Label,{children:"E-mail"}),Object(s.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(s.jsxs)(O.a.Group,{id:"password",children:[Object(s.jsx)(O.a.Label,{children:"Password"}),Object(s.jsx)(O.a.Control,{type:"password",ref:t,required:!0})]}),Object(s.jsx)(x.a,{className:"w-100",type:"Submit",children:"Login"})]}),Object(s.jsxs)("div",{children:["Need an account? ",Object(s.jsx)(C.b,{to:"/signup",className:"danger",children:"Sign Up"})]})]})})})})})},F=c(92),P=c(93),k=c(89),A=function(){var e=Object(s.jsx)("i",{className:"fas fa-user-circle"});return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(F.a,{collapseOnSelect:!0,expand:"lg",bg:"success",variant:"dark",children:[Object(s.jsx)(F.a.Brand,{href:"#home",children:"Web-Messenger"}),Object(s.jsx)(F.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(s.jsxs)(F.a.Collapse,{id:"responsive-navbar-nav",children:[Object(s.jsx)(P.a,{className:"mr-auto",children:Object(s.jsx)(P.a.Link,{href:"#features",children:"Features"})}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(k.a,{title:e,id:"collasible-nav-dropdown",children:[Object(s.jsx)(k.a.Item,{href:"#action/3.1",children:"Profile"}),Object(s.jsx)(k.a.Divider,{}),Object(s.jsx)(k.a.Item,{onClick:function(){!function(){var e=v.currentUser.uid;g.collection("users").doc(e).update({isOnline:!1}).then((function(){v.signOut()})).catch((function(e){console.error("Error updating document: ",e)}))}()},children:"Logout"})]})})]})]})})},D=c(55),E=Object(n.createContext)(),U=function(e){var t=Object(n.useState)(),c=Object(o.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),j=l[0],u=l[1],d=Object(n.useContext)(y).value;Object(n.useEffect)((function(){a?g.collection("conversations").where("user_uid_1","in",[d.user.uid,a.uid]).orderBy("createdAt","asc").onSnapshot((function(e){var t=[];e.forEach((function(e){(e.data().user_uid_1===d.user.uid&&e.data().user_uid_2===a.uid||e.data().user_uid_1===a.uid&&e.data().user_uid_2===d.user.uid)&&t.push(e.data())})),u(t)})):console.log("")}),[a,d]);var b={awayUser:function(e){r(e)},updateMessage:function(e){g.collection("conversations").add(Object(D.a)(Object(D.a)({},e),{},{isView:!1,createdAt:new Date})).then((function(e){})).catch((function(e){console.log(e)}))},Profile:a,Conversations:j};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(E.Provider,{value:{value2:b},children:e.children})})},I=Object(n.createContext)(),R=function(e){var t=Object(n.useContext)(y).value,c=Object(n.useState)([]),a=Object(o.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)(!0),j=Object(o.a)(l,2),u=j[0],d=j[1];Object(n.useEffect)((function(){t.user?g.collection("users").onSnapshot((function(e){var c=[];e.docs.forEach((function(e){e.data().uid!==t.user.uid&&c.push(e.data())})),i(c),d(!1)})):console.log("")}),[t.user]);var b={users:r,Loading:u};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(I.Provider,{value:{value1:b},children:e.children})})},W=function(){var e=Object(n.useContext)(y).value,t=Object(n.useContext)(I).value1,c=Object(n.useContext)(E).value2,r=Object(n.useState)(null),i=Object(o.a)(r,2),l=i[0],j=i[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),b=d[0],h=d[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"headind_srch",children:[Object(s.jsx)("div",{className:"recent_heading",children:Object(s.jsx)("h4",{children:e.user?e.user.displayName:"Recent"})}),Object(s.jsx)("div",{className:"srch_bar",children:Object(s.jsxs)("div",{className:"stylish-input-group",children:[Object(s.jsx)("input",{type:"text",onChange:function(e){return h(e.target.value.toLowerCase())},className:"search-bar",placeholder:"Search"}),Object(s.jsx)("span",{className:"input-group-addon",children:Object(s.jsxs)("button",{type:"button",children:[" ",Object(s.jsx)("i",{className:"fa fa-search","aria-hidden":"true"})," "]})})]})})]}),Object(s.jsx)("div",{className:"inbox_chat",children:t.Loading?Object(s.jsx)("div",{}):t.users.filter((function(e){return e.firstName.toLowerCase().indexOf(b)>-1})).map((function(e){var t=e.firstName,n=e.surName,r=e.uid,i=e.createdAt,u=e.eMail,o=e.isOnline,d=new Date(1e3*i.seconds).toLocaleString();return Object(s.jsx)(a.a.Fragment,{children:Object(s.jsx)("div",{onClick:function(){return function(e,t,s,n){var a={uid:e,firstName:t,surName:s,eMail:n};j(e),c.awayUser(a)}(r,t,n,u)},className:l===r?"chat_list active_chat":"chat_list",children:Object(s.jsxs)("div",{className:"chat_people ",children:[Object(s.jsx)("div",{className:"chat_img",children:Object(s.jsx)("img",{src:"https://ptetutorials.com/images/user-profile.png",alt:"sunil"})}),Object(s.jsxs)("div",{className:"chat_ib",children:[Object(s.jsxs)("h5",{children:[t," ",n," ",Object(s.jsx)("span",{className:"chat_date",children:d})]}),Object(s.jsx)("p",{children:o?"online":"offline"})]})]})})},r)}))})]})},G=c(91),q=function(){var e=Object(n.useContext)(y).value,t=Object(n.useContext)(E).value2,c=Object(n.useState)(""),a=Object(o.a)(c,2),r=a[0],i=a[1],l=function(){var c={user_uid_1:e.user.uid,user_uid_2:t.Profile.uid,message:r};0!==r.length&&(t.updateMessage(c),i(""))},j=Object(n.useRef)(null);return Object(n.useEffect)((function(){!function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView()}()}),[t.Conversations]),Object(s.jsx)(s.Fragment,{children:t.Profile?Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"mesgs",children:[Object(s.jsxs)("div",{className:"msg_history",children:[0!==t.Conversations.length?t.Conversations.map((function(t){var c=t.user_uid_1,n=t.message,a=t.createdAt,r=new Date(1e3*a.seconds).toLocaleString();return c!==e.user.uid?Object(s.jsxs)("div",{className:"incoming_msg",id:"incoming",children:[Object(s.jsxs)("div",{className:"incoming_msg_img",children:[" ",Object(s.jsx)("img",{src:"https://ptetutorials.com/images/user-profile.png",alt:"sunil"})," "]}),Object(s.jsx)("div",{className:"received_msg",children:Object(s.jsxs)("div",{className:"received_withd_msg",children:[Object(s.jsx)("p",{children:n}),Object(s.jsxs)("span",{className:"time_date",children:[" ",r]})]})})]},Object(G.a)()):Object(s.jsx)("div",{className:"outgoing_msg",children:Object(s.jsxs)("div",{className:"sent_msg",children:[Object(s.jsx)("p",{children:n}),Object(s.jsxs)("span",{className:"time_date",children:[" ",r]})]})},Object(G.a)())})):Object(s.jsx)("div",{}),Object(s.jsx)("div",{ref:j})]}),Object(s.jsx)("div",{className:"type_msg",children:Object(s.jsxs)("div",{className:"input_msg_write",children:[Object(s.jsx)("input",{id:"handleKeypress",type:"text",value:r,onChange:function(e){i(e.target.value)},onKeyPress:function(e){13===(e.which||e.keyCode)&&l()},className:"write_msg",placeholder:"Type a message"}),Object(s.jsx)("button",{className:"msg_send_btn",onClick:function(){l()},type:"submit",children:Object(s.jsx)("i",{className:"fas fa-paper-plane","aria-hidden":"true"})})]})})]})}):Object(s.jsx)("h1",{children:"Welcome"})})},B=function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(A,{}),Object(s.jsxs)("div",{className:"inbox_msg",children:[Object(s.jsx)("div",{className:"inbox_people",children:Object(s.jsx)(W,{})}),Object(s.jsx)(q,{})]})]})})};var M=function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(C.a,{children:Object(s.jsx)(w,{children:Object(s.jsx)(R,{children:Object(s.jsxs)(U,{children:[Object(s.jsx)(m.b,{path:"/login",children:Object(s.jsx)(L,{})}),Object(s.jsx)(m.b,{path:"/signup",children:Object(s.jsx)(S,{})}),Object(s.jsxs)(m.b,{exact:!0,path:"/",children:[" ",Object(s.jsx)(B,{})," "]})]})})})})})};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.53a1e994.chunk.js.map